<style>
  p {
    max-width: 250px;
    font-size: 18px;
  }
</style>

<p>
  <%= "Order #" %>
  <%= @order.id %><br>
  
  <%= "Ordered by:" %>
  <%= @customers.find(@order.customer_id).FirstName %> <%= @customers.find(@order.customer_id).LastName %><br>
  <%= "Order time:" %>
  <%= @order.created_at.strftime("%l") %>
  <%= ":" %>
  <%= @order.created_at.strftime("%M") %><br>
  
  <br><%= "Items:" %><br>
  <% @orderlines.each do |a| %>
    <br><b><%= @products.find(a.product_id).Name %></b>
    
    <% if a.whole? %> <%#list the options if the product is whole %>
      <br><%= "all" %>
      <% if a.Options1.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options1.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      
    <% elsif a.halves? %> <%#list the options if the product is split in halves %>
      <br><%= "half" %>
      <% if a.Options1.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options1.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      <br><%= "half" %>
      <% if a.Options2.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options2.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      
    <% elsif a.quarters? %> <%#list the options if the product is split in halves %>
      <br><%= "quarter" %>
      <% if a.Options1.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options1.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      <br><%= "quarter" %>
      <% if a.Options2.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options2.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      <br><%= "quarter" %>
      <% if a.Options3.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options3.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
      <br><%= "quarter" %>
      <% if a.Options4.nil? %> 
        <%= "Plain" %>
      <% else %>
        <% a.Options4.each do |b| %>
          <%= @options.find(b).Abbreviation %>
        <% end %>
      <% end %>
    <% end %>
    
  <% end %>
  
<div class = "printing" >
  <script>
  $("document").ready(function() {
    setTimeout(function() {
       window.print();
    },10);
  });
  </script>
</div>

<div class = "redirect after print" >
  <script>
  $("document").ready(function() {
    setTimeout(function() {
    window.location.replace("<%= orders_path %>");
    },500000);
  });
  </script>
</div>

</p>