<style>
.nav-tabs {
  font-size: 1em;
}
.nav-tabs>li>a {
  padding: .4em;
  font-size: 1.2em;
}
ul {
  margin: 5px;
}
.sidebar-left a.nav-item, .sidebar-left a.nav-item:hover {
	background-color: #524E4E;
	color: #d8d8d8;
	border-bottom: 1px solid #888;
	font-size: 1.2em;
	top: -5px;
	left: -4px;
}
</style>

<%= render 'bars/top2' %>

<body>
  <div class="wrapper has-sidebar-left">
    <%= render 'sidebars/orderside' %>
    <div class="container main-content">
      
      <% if flash[:notice].present? %>
        <p id="notice" class="alert alert-warning"><strong>Notice! </strong><%= flash[:notice] %></p>
      <% end %>

    <% # Check capabilities
    if ( !logged_in? || !current_user.can?("create", "orders")) %>
      <p> Sorry, you don't have the capabilities to do that </p>

    <% else %>

      <h1>Current Order</h1>
      <%= render 'currentorderbox', order: @order %>
      
      <div>
        <ul class="nav nav-tabs">
          <% @categories.each do |cat| %>
            <li><%= link_to cat.Abbreviation, ("#" + cat.Name.gsub(/\s+/, "")), { 'data-toggle' => 'tab' } %></li>
          <% end %>
        </ul>
        
      
        <div class="tab-content">
          <% @categories.each do |cat| %>
            <%= content_tag :div, :class => "tab-pane", :id => cat.Name.gsub(/\s+/, "") do -%>
              <p>
                <% Product.where("category_id = ?", cat.id).each do |p| %>
                  <%= link_to p.Name, orders_addproducttoorder_path(order_id: @order.id, product_id: p.id), method: :post, class: "btn btn-product" %>
                <% end %>
              </p>
            <% end -%>
          <% end %>
        </div>
      </div>
  <% end %>
    </div>
  </div>
</body>